<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ê–≤—Ç–æ–º–∞—Å—Ç–µ—Ä—Å–∫–∞—è ‚Äî —Ä–µ–º–æ–Ω—Ç –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ –∞–≤—Ç–æ</title>
  <meta name="description" content="–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å: –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, –¢–û, —à–∏–Ω–æ–º–æ–Ω—Ç–∞–∂, –∑–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞, –∞–≤—Ç–æ—ç–ª–µ–∫—Ç—Ä–∏–∫–∞. –û–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å—å –∏ —Å—Ç–∞—Ç—É—Å —Ä–µ–º–æ–Ω—Ç–∞." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/style.css">
</head>

<body>
  <a class="skip" href="#main">–ö –æ—Å–Ω–æ–≤–Ω–æ–º—É —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É</a>
  
  <header>
    <div class="container topbar" role="banner">
      <div class="brand">
        <span class="brand__logo" aria-hidden="true" title="–õ–æ–≥–æ—Ç–∏–ø">
         <svg xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 24 24" width="34" height="40" fill="#e11d48"><path d="M22.5,14H1.5a7.109,7.109,0,0,1,.423-.88L3.98,9.52A5.013,5.013,0,0,1,8.321,7h7.358A5.011,5.011,0,0,1,20.02,9.52l2.057,3.6A7.116,7.116,0,0,1,22.5,14ZM19,16v1a1,1,0,0,1-2,0V16H7v1a1,1,0,0,1-2,0V16H1.026Q1,16.3,1,16.594V18a4,4,0,0,0,2,3.463V22a2,2,0,0,0,4,0H17a2,2,0,0,0,4,0v-.537A4,4,0,0,0,23,18V16.594q0-.3-.026-.594ZM23,4H22a1,1,0,0,1,0-2h1c.673,0,.625-.448.493-.649A3.015,3.015,0,0,0,18.167,2H5.845A3.015,3.015,0,0,0,.519,1.351C0,2.283,1.926,1.939,2.012,2a1,1,0,0,1,0,2h-1c-.673,0-.625.448-.493.649A3.015,3.015,0,0,0,5.845,4H18.167a3.015,3.015,0,0,0,5.326.649C23.625,4.448,23.673,4,23,4Z"/></svg>
         </span>
        <span class="brand__name">–ê–≤—Ç–æ–º–∞—Å—Ç–µ—Ä—Å–∫–∞—è</span>
      </div>
      <nav aria-label="–û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
        <ul>
          <li><a class="nav__link" href="#services">–£—Å–ª—É–≥–∏</a></li>
          <li><a class="nav__link" href="#pricing">–¶–µ–Ω—ã</a></li>
          <li><a class="nav__link" href="#booking" aria-current="page">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</a></li>
          <li><a class="nav__link" href="#reviews">–û—Ç–∑—ã–≤—ã</a></li>
          <li><a class="nav__link" href="#contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
        </ul>
      </nav>
      <div class="actions" role="group" aria-label="–î–µ–π—Å—Ç–≤–∏—è">
  
  

  <a href="tel:+375290000000" class="actions__icon" aria-label="–ü–æ–∑–≤–æ–Ω–∏—Ç—å">
    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1v3.49c0 .55-.45 1-1 1C9.25 21 3 14.75 3 7.5c0-.55.45-1 1-1H7.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/></svg>
  </a>
  <a href="#booking" class="actions__icon" aria-label="–ó–∞–ø–∏—Å–∞—Ç—å—Å—è">
    <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
  </a>
  <a href="auth.html" class="actions__icon" aria-label="–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç" id="cabinet-link">
  <!-- –ò–∫–æ–Ω–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî "–≤—Ö–æ–¥" -->
  <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24">
    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
  </svg>
</a>
</div>
    </div>
  </header>

  

  <main id="main" tabindex="-1">
    <section class="hero" aria-labelledby="hero-title">
      <div class="container hero__inner">
        <div>
          <h1 id="hero-title">–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞–≤—Ç–æ—Å–µ—Ä–≤–∏—Å: –±—ã—Å—Ç—Ä–æ, —á–µ—Å—Ç–Ω–æ, —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π</h1>
          <p>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞, –¢–û, —à–∏–Ω–æ–º–æ–Ω—Ç–∞–∂, –∞–≤—Ç–æ—ç–ª–µ–∫—Ç—Ä–∏–∫–∞. –û–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å—å –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Ä–µ–º–æ–Ω—Ç–∞ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ.</p>
          <div class="badges" role="list" aria-label="–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞">
            <span class="badge" role="listitem">‚ö° –°—Ä–æ—á–Ω—ã–µ —Å–ª–æ—Ç—ã —Å–µ–≥–æ–¥–Ω—è</span>
            <span class="badge" role="listitem">üõ°Ô∏è –ì–∞—Ä–∞–Ω—Ç–∏—è 12 –º–µ—Å—è—Ü–µ–≤</span>
            <span class="badge" role="listitem">üí≥ –û–ø–ª–∞—Ç–∞ –æ–Ω–ª–∞–π–Ω</span>
          </div>
          <div class="hero__cta">
            <a class="btn btn--primary" href="#booking">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –æ–Ω–ª–∞–π–Ω</a>
            <a class="btn" href="#pricing">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å</a>
          </div>
        </div>
        <figure class="hero__media" aria-labelledby="media-caption">
          <img 
            src="https://images.unsplash.com/photo-1542362567-b07e54358753?q=80&w=1800&auto=format&fit=crop"
            srcset="https://images.unsplash.com/photo-1542362567-b07e54358753?q=80&w=2400&auto=format&fit=crop&fm=webp 2400w,
                    https://images.unsplash.com/photo-1542362567-b07e54358753?q=80&w=1800&auto=format&fit=crop&fm=webp 1800w,
                    https://images.unsplash.com/photo-1542362567-b07e54358753?q=80&w=1200&auto=format&fit=crop&fm=webp 1200w"
              sizes="(max-width: 640px) 90vw, (max-width: 959px) 80vw, 40vw"
              alt="–ú–µ—Ö–∞–Ω–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —É –∞–≤—Ç–æ–º–æ–±–∏–ª—è –≤ —Å–µ—Ä–≤–∏—Å–µ"
              loading="lazy"
              decoding="async">
          <figcaption id="media-caption" class="hero__stat">–°–≤–æ–±–æ–¥–Ω–æ —Å–ª–æ—Ç–æ–≤ —Å–µ–≥–æ–¥–Ω—è: <strong>5</strong></figcaption>
        </figure>
      </div>
    </section>

    <section id="services" aria-labelledby="services-title">
      <div class="container">
        <h2 id="services-title">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —É—Å–ª—É–≥–∏</h2>
        <div class="grid grid--3" role="list">
          <article class="card service" role="listitem">
            <div class="service__icon" aria-hidden="true">üîß</div>
            <div>
              <h3>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h3>
              <p>–ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É–∑–ª–æ–≤ –∏ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤. –í—Ä–µ–º—è ‚Äî ~45 –º–∏–Ω.</p>
            </div>
          </article>
          <article class="card service" role="listitem">
            <div class="service__icon" aria-hidden="true">üõ¢Ô∏è</div>
            <div>
              <h3>–ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞</h3>
              <p>–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –º–∞—Å–ª–∞ –∏ —Ñ–∏–ª—å—Ç—Ä—ã. –ì–∞—Ä–∞–Ω—Ç–∏—è –Ω–∞ —Ä–∞–±–æ—Ç—ã.</p>
            </div>
          </article>
          <article class="card service" role="listitem">
            <div class="service__icon" aria-hidden="true">üõû</div>
            <div>
              <h3>–®–∏–Ω–æ–º–æ–Ω—Ç–∞–∂</h3>
              <p>–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞, —Ä–µ–º–æ–Ω—Ç –ø—Ä–æ–∫–æ–ª–æ–≤, —Å–µ–∑–æ–Ω–Ω–∞—è —Å–º–µ–Ω–∞.</p>
            </div>
          </article>
        </div>
      </div>
    </section>

    <section id="pricing" aria-labelledby="pricing-title">
      <div class="container">
        <h2 id="pricing-title">–¶–µ–Ω—ã</h2>
        <div class="grid grid--3">
          <article class="card" aria-labelledby="p1-title">
            <h3 id="p1-title">–ë–∞–∑–æ–≤–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h3>
            <p><strong>–æ—Ç 1 500 ‚ÇΩ</strong> ¬∑ 45 –º–∏–Ω</p>
          </article>
          <article class="card" aria-labelledby="p2-title">
            <h3 id="p2-title">–ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞</h3>
            <p><strong>–æ—Ç 1 200 ‚ÇΩ</strong> ¬∑ 30 –º–∏–Ω</p>
          </article>
          <article class="card" aria-labelledby="p3-title">
            <h3 id="p3-title">–®–∏–Ω–æ–º–æ–Ω—Ç–∞–∂</h3>
            <p><strong>–æ—Ç 1 000 ‚ÇΩ</strong> ¬∑ 40 –º–∏–Ω</p>
          </article>
        </div>
      </div>
    </section>

    <section aria-labelledby="slots-title">
      <div class="container">
        <h2 id="slots-title">–ë–ª–∏–∂–∞–π—à–∏–µ —Å–≤–æ–±–æ–¥–Ω—ã–µ —Å–ª–æ—Ç—ã</h2>
        <div class="slots" role="list">
          <div class="slot" role="listitem">–°–µ–≥–æ–¥–Ω—è <time datetime="2025-09-25T15:30">15:30</time></div>
          <div class="slot" role="listitem">–°–µ–≥–æ–¥–Ω—è <time datetime="2025-09-25T17:00">17:00</time></div>
          <div class="slot" role="listitem">–°–µ–≥–æ–¥–Ω—è <time datetime="2025-09-25T18:30">18:30</time></div>
          <div class="slot" role="listitem">–ó–∞–≤—Ç—Ä–∞ <time datetime="2025-09-26T10:00">10:00</time></div>
        </div> 
      </div>
    </section>

   <section id="reviews" aria-labelledby="reviews-title">
  <div class="container">
    <h2 id="reviews-title">–û—Ç–∑—ã–≤—ã –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>

    <div class="reviews-carousel">
      <button class="carousel__prev" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∏–µ –æ—Ç–∑—ã–≤—ã" disabled>‚Äπ</button>

      <div class="carousel__viewport">
        <div class="carousel__track grid grid--3" id="reviews-track">
          <p style="grid-column: 1 / -1; text-align:center; color:var(--muted);">–ó–∞–≥—Ä—É–∑–∫–∞ –æ—Ç–∑—ã–≤–æ–≤...</p>
        </div>
      </div>

      <button class="carousel__next" aria-label="–°–ª–µ–¥—É—é—â–∏–µ –æ—Ç–∑—ã–≤—ã" disabled>‚Ä∫</button>
    </div>
  </div>
</section>

    <section id="booking" aria-labelledby="booking-title">
  <div class="container">
    <div class="grid grid--2">
      <div>
        <h2 id="booking-title">–û–Ω–ª–∞–π–Ω-–∑–∞–ø–∏—Å—å</h2>

        <form id="booking-form" action="/booking" method="POST" aria-describedby="booking-help">
          <p id="booking-help" style="color:var(--muted); margin:0">
            –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É, –º—ã –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–º –±—Ä–æ–Ω—å –ø–æ SMS/Email.
          </p>

          <label for="name">
            –í–∞—à–µ –∏–º—è
            <input id="name" name="name" type="text" placeholder="–í–∞—à–µ –∏–º—è" required>
          </label>

          <label for="service">
            –£—Å–ª—É–≥–∞
            <select id="service" name="service" required>
              <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥—É</option>
              <option>–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</option>
              <option>–ó–∞–º–µ–Ω–∞ –º–∞—Å–ª–∞</option>
              <option>–®–∏–Ω–æ–º–æ–Ω—Ç–∞–∂</option>
            </select>
          </label>

         <label for="car-select">
  –ê–≤—Ç–æ–º–æ–±–∏–ª—å
  <select id="car-select" name="car" required style="display:none;">
    <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –∞–≤—Ç–æ–º–æ–±–∏–ª—å</option>
  </select>
  <input id="car-input" name="car" type="text" placeholder="–ú–∞—Ä–∫–∞ –∏ –º–æ–¥–µ–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä: Toyota Camry)" required>
</label>

          <label for="dateTime">
            –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
            <input id="dateTime" name="dateTime" type="datetime-local" required>
          </label>

          <label for="phone">
            –¢–µ–ª–µ—Ñ–æ–Ω
            <input id="phone" name="phone" type="tel" inputmode="tel" placeholder="+375 (29) 123-45-67" required>
          </label>

          <label for="comment">
            –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
            <textarea id="comment" name="comment" rows="3" placeholder="VIN, –ø—Ä–∏–º–µ—Ç—ã –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–∏ –∏ —Ç.–ø."></textarea>
          </label>

          <div style="display:flex; gap:10px; align-items:center">
            <button type="submit" class="btn btn--primary">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
            <small aria-live="polite">–û—Ç–≤–µ—Ç–∏–º –≤ —Ç–µ—á–µ–Ω–∏–µ 15 –º–∏–Ω—É—Ç –≤ —Ä–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è</small>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<script src="/scripts/auth-check.js" defer></script>

          <aside id="contacts" aria-labelledby="aside-contact-title">
            <h2 id="aside-contact-title" style="margin-top:0">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
            <address>
              –≥. –ì—Ä–æ–¥–Ω–æ, —É–ª. –ü–æ–Ω–µ–º—É–Ω—å—Å–∫–∞—è, 10<br>
              –ü–Ω‚Äì–°–± 09:00‚Äì20:00, –í—Å 10:00‚Äì18:00<br>
              –¢–µ–ª.: <a href="tel:+375290000000">+375¬†29¬†000‚Äë00‚Äë00</a><br>
              WhatsApp: <a href="#">–Ω–∞–ø–∏—Å–∞—Ç—å</a>
            </address>
            <div class="card" aria-label="–ö–∞–∫ –¥–æ–±—Ä–∞—Ç—å—Å—è">
  <strong>–ö–∞–∫ –¥–æ–±—Ä–∞—Ç—å—Å—è</strong>
  <p class="muted">–û—Ç –ø–ª–æ—â–∞–¥–∫–∏ –ì–ê–ò ‚Äî 7 –º–∏–Ω—É—Ç –ø–µ—à–∫–æ–º.</p>

  <div style="margin: 25px 0; text-align: center;">
    <a href="https://yandex.ru/maps/?ll=23.870302%2C53.663156&z=17&pt=23.870302,53.663156"
       target="_blank"
       rel="noopener"
       style="display: inline-block; border-radius: 20px; overflow: hidden; box-shadow: 0 8px 20px rgba(0,0,0,0.4); transition: transform .2s;">
      <img 
        src="https://static-maps.yandex.ru/1.x/?ll=23.870302,53.663156&z=16&size=450,450&l=map&pt=23.870302,53.663156,pm2rdm"
        alt="–ö–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∑–¥–∞"
        width="250"
        height="250"
        style="display: block; border-radius: 15px;">
    </a>
  </div>

  <p style="text-align:center; margin: 10px 0 0;">
    <a href="https://yandex.ru/maps/?ll=23.870302%2C53.663156&z=17&pt=23.870302,53.663156"
       target="_blank" 
       rel="noopener"
       style="color: var(--accent); font-weight: 700; font-size: 0.9rem;">
      –û—Ç–∫—Ä—ã—Ç—å –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç—É ‚Üí
    </a>
  </p>
</div>
</div>
          </aside>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <div class="container footer__cols" role="contentinfo">
      <div class="footer__brand">
        <strong>–ê–≤—Ç–æ–º–∞—Å—Ç–µ—Ä—Å–∫–∞—è</strong>
        <p>–ù–∞–¥—ë–∂–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º–∏ —Ü–µ–Ω–∞–º–∏ –∏ –≥–∞—Ä–∞–Ω—Ç–∏–µ–π –Ω–∞ —Ä–∞–±–æ—Ç—ã.</p>
      </div>
      <nav aria-label="–°–ª—É–∂–µ–±–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è">
        <ul style="list-style:none; padding:0; margin:0; display:grid; gap:8px">
          <li><a href="#services">–£—Å–ª—É–≥–∏</a></li>
          <li><a href="#pricing">–¶–µ–Ω—ã</a></li>
          <li><a href="#booking">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</a></li>
          <li><a href="#reviews">–û—Ç–∑—ã–≤—ã</a></li>
          <li><a href="#contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
        </ul>
      </nav>
      <div>
        <small>¬© 2025 ‚Äî –ò–ü ¬´–ê–≤—Ç–æ–º–∞—Å—Ç–µ—Ä—Å–∫–∞—è¬ª<br>–ò–ù–ù 0000000000 ¬∑ –û–ì–†–ù–ò–ü 000000000000000</small>
      </div>
    </div>
  </footer>
  <button id="to-top" class="to-top" aria-label="–ù–∞–≤–µ—Ä—Ö">‚Üë</button>
  <script src="/scripts/app.js" defer></script>
  <script src="/scripts/main.js"></script>
  <script src="/scripts/auth-check.js"></script>
  <script src="/scripts/booking.js"></script>
  <script>
document.addEventListener("DOMContentLoaded", async () => {
  const carSelect = document.getElementById("car-select");
  const carInput = document.getElementById("car-input");
  const nameInput = document.getElementById("name");  // ‚Üê –ø–æ–ª–µ –∏–º–µ–Ω–∏ –≤ —Ñ–æ—Ä–º–µ

  if (!carSelect || !carInput || !nameInput) return;

  const getCookie = name => document.cookie.match('(^|;)\\s*' + name + '\\s*=\\s*([^;]+)')?.pop() || null;
  const userId = getCookie('user');

  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –æ–±—ã—á–Ω—ã–π input –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
  carInput.style.display = "block";
  carSelect.style.display = "none";
  carSelect.removeAttribute("required");

  if (userId) {
    try {
      // 1. –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–º—è)
      const userRes = await fetch(`/api/user?id=${userId}`);
      const user = await userRes.json();

      if (user && user.name) {
        nameInput.value = user.name;           // ‚Üê –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º –∏–º—è
        nameInput.setAttribute("readonly", ""); // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –¥–µ–ª–∞–µ–º –ø–æ–ª–µ –Ω–µ—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–º
      }

      // 2. –ü–æ–ª—É—á–∞–µ–º –∞–≤—Ç–æ–º–æ–±–∏–ª–∏
      const carsRes = await fetch(`/api/cars?user_id=${userId}`);
      const cars = await carsRes.json();

      if (cars.length === 0) {
        carInput.placeholder = "–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∞–≤—Ç–æ ¬∑ –î–æ–±–∞–≤—å—Ç–µ –≤ –∫–∞–±–∏–Ω–µ—Ç–µ";
      } else {
        carSelect.innerHTML = `<option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—å</option>`;
        cars.forEach(car => {
          const opt = document.createElement("option");
          opt.value = `${car.brand} ${car.model} (${car.year})`;
          opt.textContent = `${car.brand} ${car.model} ${car.year} –≥.`;
          carSelect.appendChild(opt);
        });

        carSelect.style.display = "block";
        carInput.style.display = "none";
        carSelect.setAttribute("required", "");

        carSelect.addEventListener("change", () => {
          if (carSelect.value) carInput.value = carSelect.value;
        });
      }
    } catch (err) {
      console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:", err);
      // –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Äî –æ—Å—Ç–∞–≤–ª—è–µ–º –ø–æ–ª—è –ø—É—Å—Ç—ã–º–∏
    }
  }
});
</script>
<script>
document.addEventListener("DOMContentLoaded", async () => {
  const track = document.getElementById("reviews-track");
  const prevBtn = document.querySelector(".carousel__prev");
  const nextBtn = document.querySelector(".carousel__next");
  if (!track) return;

  let currentSlide = 0;
  const slidesCount = 2; // 0, 1, 2 ‚Äî –≤—Å–µ–≥–æ 3 —Å–ª–∞–π–¥–∞ (–ø–æ 3 –æ—Ç–∑—ã–≤–∞)

  const updateButtons = () => {
    prevBtn.disabled = currentSlide === 0;
    nextBtn.disabled = currentSlide === slidesCount;
  };

  const goToSlide = (slide) => {
    currentSlide = Math.max(0, Math.min(slide, slidesCount));
    track.style.transform = `translateX(-${currentSlide * 100}%)`;
    updateButtons();
  };

  prevBtn.addEventListener("click", () => goToSlide(currentSlide - 1));
  nextBtn.addEventListener("click", () => goToSlide(currentSlide + 1));

  try {
    // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 9 –æ—Ç–∑—ã–≤–æ–≤
    const response = await fetch("/api/reviews?limit=9");
    const reviews = await response.json();

    track.innerHTML = ""; // –û—á–∏—â–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –∑–∞–≥—Ä—É–∑–∫–µ

    if (reviews.length === 0) {
      track.innerHTML = '<p style="grid-column: 1 / -1; text-align:center; color:var(--muted);">–ü–æ–∫–∞ –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤</p>';
      prevBtn.style.display = nextBtn.style.display = "none";
      return;
    }

    reviews.forEach(review => {
      const starsFilled = '‚òÖ'.repeat(review.rating || 0);
      const starsEmpty = '‚òÜ'.repeat(5 - (review.rating || 0));
      const dateObj = new Date(review.review_date);
      const formattedDate = dateObj.toLocaleDateString('ru-RU', {
        day: 'numeric', month: 'short', year: 'numeric'
      });

      const reviewEl = document.createElement("article");
      reviewEl.className = "card review";
      reviewEl.setAttribute("aria-label", `–û—Ç–∑—ã–≤ ${review.name}`);
      reviewEl.innerHTML = `
        <div class="stars" aria-hidden="true" style="font-size:1.2rem; color:#fbbf24;">
          ${starsFilled}${starsEmpty}
        </div>
        <p>${review.review_text || ''}</p>
        <footer>${review.name} ¬∑ <time datetime="${review.review_date}">${formattedDate}</time></footer>
      `;

      track.appendChild(reviewEl);
    });

    // –ï—Å–ª–∏ –æ—Ç–∑—ã–≤–æ–≤ –º–µ–Ω—å—à–µ 3 ‚Äî —Å–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–µ–ª–∫–∏
    if (reviews.length <= 3) {
      prevBtn.style.display = nextBtn.style.display = "none";
    } else {
      prevBtn.style.display = nextBtn.style.display = "flex";
    }

    updateButtons();
  } catch (error) {
    console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ—Ç–∑—ã–≤–æ–≤:", error);
    track.innerHTML = '<p style="grid-column: 1 / -1; text-align:center; color:var(--muted);">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –æ—Ç–∑—ã–≤—ã</p>';
  }
});
</script>
</body>
</html>